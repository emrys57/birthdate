<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="localcss.css" />
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js'></script>
        <script type='text/javascript' src='birthdate.js'></script>
    </head>
    <body>
        <div class="mainDisplay">
            <h1>Birthdate and Age Calculator</h1>
        </div>
        <div class="mainDisplay">
            <div class="parmTitle">Calculation: </div>
            <div class="ib column" >
                <select data-bind="options: calculators, optionsText: 'dropDownText', optionsValue: 'codedValue', value: calculation" >
                </select>
            </div>
            <div data-bind="if: calculation()=='bfaaukc'">
                <div class="parmTitle">Census Year:</div> 
                <div class="ib" >
                    <select data-bind="options: ukCensusYears, value:ukCensusYear">
                    </select>
                </div>
            </div>      
        </div>
        <div class="mainDisplay">
            <div data-bind="if: calculation() != 'bfbrq'">
                <div class="parmTitle"></div>
                <div class="ib column" >Years</div>
                <div class="ib column" >Months</div>
                <div class="ib column" >Weeks</div>
                <div class="ib column" >Days</div>
                <br />
                <div class="parmTitle">
                    Age:
                </div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: ageYears, valueUpdate: 'afterkeydown', css: { invalid: !ageYValid() }"/></div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: ageMonths, valueUpdate: 'afterkeydown', css: { invalid: !ageMValid() }"/></div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: ageWeeks, valueUpdate: 'afterkeydown', css: { invalid: !ageWValid() }"/></div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: ageDays, valueUpdate: 'afterkeydown', css: { invalid: !ageDValid() }"/></div>
                <br />
            </div>
            <div data-bind="if: calculation() == 'bfaaukc'">
                <div class="parmTitle">On Census Day</div>
                <div class="ib" data-bind="text:displayedUKCensusDate"></div>
            </div>
            <div data-bind="if: calculation() == 'bfbrq'">
                <div class="parmTitle"></div>
                <div class="ib column" >Year</div>
                <div class="ib" data-bind="if: registrationMonthly"><div class="ib column" >Month</div></div>
                <div class="ib" data-bind="if: !registrationMonthly()"><div class="ib column" >Quarter</div></div>
                <div></div>
                <div class="parmTitle">Birth Registration</div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: onDate1Year, valueUpdate: 'afterkeydown', css: { invalid: !onDate1YSet() }"></div>
                <div class="ib column" >
                    <select data-bind="options: briUnits, optionsText: 'dropDownText', value: briUnit" >
                </select>
                </div>
                <br /><br />
            </div>
            <div data-bind="if: calculation() == 'bfaod'">
                <div class="parmTitle"></div>
                <div class="ib column" >Year</div>
                <div class="ib column" >Month</div>
                <div class="ib column" >Day</div>
                <br />
                <div class="parmTitle">
                    On date:
                </div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: onDate1Year, valueUpdate: 'afterkeydown', css: { invalid: !onDate1YSet() }"></div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: onDate1Month, valueUpdate: 'afterkeydown', css: { invalid: !onDate1MValid()}"></div>
                <div class="ib column" ><input type="text" class="columnInput" data-bind="value: onDate1Day, valueUpdate: 'afterkeydown', css: { invalid: !onDate1DValid()}"></div>
                <br />
                <!--            <br />
                            <div class="parmTitle">onDate1Min:</div>
                            <div class="ib column" data-bind="text: onDate1YMin"></div>
                            <div class="ib column" data-bind="text: onDate1MMin"></div>
                            <div class="ib column" data-bind="text: onDate1DMin"></div>
                            <div class="ib column" data-bind="text: onDate1DayMin"></div>
                            <br /><div class="parmTitle">onDate1Max:</div>
                            <div class="ib column" data-bind="text: onDate1YMax"></div>
                            <div class="ib column" data-bind="text: onDate1MMax"></div>
                            <div class="ib column" data-bind="text: onDate1DMax"></div>
                            <div class="ib column" data-bind="text: onDate1DayMax"></div>
                            <br />-->

                <div class="parmTitle"></div>
                <div class="redAlert" data-bind="if: birthdateInvalid">Invalid!</div>
                <br />
            </div>
            <div data-bind="if: birthdateWanted">
                <div class="parmTitle">Birth Earliest:</div>
                <div class="ib" data-bind="if: displayDefined">
                    <div class="ib column" data-bind="text: earliestBirthDate().getFullYear()"></div>
                    <div class="ib column" data-bind="text: earliestBirthDate().getMonth()+1"></div>
                    <div class="ib column" data-bind="text: earliestBirthDate().getDate()"></div>
                    <div class="ib column" data-bind="text: dayFromDate(earliestBirthDate())"></div>
                    <div class="ib column" data-bind="text: '00:00'"></div>
                </div>
                <div class="redAlert" data-bind="if: birthdateImpossible">Impossible!!</div>
                <br /><div class="parmTitle">Birth Latest:</div>
                <div class="ib" data-bind="if: displayDefined">
                    <div class="ib column" data-bind="text: latestBirthDate().getFullYear()"></div>
                    <div class="ib column" data-bind="text: latestBirthDate().getMonth()+1"></div>
                    <div class="ib column" data-bind="text: latestBirthDate().getDate()"></div>
                    <div class="ib column" data-bind="text: dayFromDate(latestBirthDate())"></div>
                    <div class="ib column" data-bind="text: '23:59'"></div>
                </div>
                <br />
            </div>
        </div>
        <!--        <div class="mainDisplay" >
                    <div data-bind="with: units">
                        <div data-bind="template: 'units'"></div>
                    </div>
                    <div data-bind="with: diff">
                        <div data-bind="template: 'diff'"></div>
                    </div>
                    <div data-bind="foreach: dates">
                        <div data-bind="template: 'oneDate'">
                        </div>
                    </div>
                </div>-->
        <div class="development" data-bind="if:developmentWanted">
            <div class="developmentBox" id="developmentBox" style="">
                <div style="">Development Only</div>
                <hr />
                <label class="checkboxLabel"><input type="checkbox" class="checkboxInput" data-bind="checked: showModel"> Show knockout.js model</label>
            </div>
            <div data-bind="if: showModel"><pre data-bind="text: ko.toJSON($data, null, 2)"></pre></div>
        </div>
        <script type="text/html" id="oneDate">
            <div class="parmTitle" data-bind="html: name"></div>
            <div class="ib column" ><input type="text" class="columnInput" data-bind="value: y, valueUpdate: 'afterkeydown'"/></div>
            <div class="ib column" ><input type="text" class="columnInput" data-bind="value: m, valueUpdate: 'afterkeydown'"/></div>
            <div class="ib column" ><input type="text" class="columnInput" data-bind="value: d, valueUpdate: 'afterkeydown'"/></div>
            <div class="redAlert" data-bind="if: !valid()">Invalid!</div>
            <div class="redAlert" data-bind="text: problems"></div>
        </script>
        <script type="text/html" id ="units">
            <div class="parmTitle" data-bind="html: name"></div>
            <div class="ib column" ><input type="checkbox" data-bind="checked: y"/>years</div>
            <div class="ib column" ><input type="checkbox" data-bind="checked: m"/>months</div>
            <div class="ib column" ><input type="checkbox" data-bind="checked: w"/>weeks</div>
            <div class="ib column" ><input type="checkbox" data-bind="checked: d"/>days</div>
        </script>
        <script type="text/html" id ="diff">
            <div class="parmTitle" data-bind="html: name"></div>
            <div class="ib column" data-bind="text: d().y"></div>
            <div class="ib column" data-bind="text: d().m"></div>
            <div class="ib column" data-bind="text: d().w"></div>
            <div class="ib column" data-bind="text: d().d"></div>
        </script>
    </body>
</html>
